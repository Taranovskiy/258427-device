var link = document.querySelector(".contacts-block__btn"),
  popup = document.querySelector(".modal-feedback"),
  overlay = document.querySelector(".modal-overlay"),
  close = popup.querySelector(".modal-feedback .modal-close-btn"),
  userName = popup.querySelector("[name=user-name]"),
  mail = popup.querySelector("[name=mail]"),
  letter = popup.querySelector("[name=letter]"),
  form = popup.querySelector("form"),
  storageUserName = localStorage.getItem("user-name"),
  storageMail = localStorage.getItem("mail");
link.addEventListener("click", function(a) {
  a.preventDefault(), popup.classList.add("modal-show"), overlay.classList.add("modal-overlay--show"), storageUserName && storageMail ? (userName.value = storageUserName, mail.value = storageMail, letter.focus()) : userName.focus()
}), close.addEventListener("click", function(a) {
  a.preventDefault(), popup.classList.remove("modal-show"), overlay.classList.remove("modal-overlay--show"), popup.classList.remove("modal-feedback--error")
}), overlay.addEventListener("click", function(a) {
  popup.classList.remove("modal-show"), overlay.classList.remove("modal-overlay--show")
}), form.addEventListener("submit", function(a) {
  a.preventDefault(), userName.value && mail.value && letter.value ? (localStorage.setItem("user-name", userName.value), localStorage.setItem("mail", mail.value)) : (a.preventDefault(), popup.classList.remove("modal-feedback--error"), popup.offsetWidth = popup.offsetWidth, popup.classList.add("modal-feedback--error"))
}), window.addEventListener("keydown", function(a) {
  27 === a.keyCode && popup.classList.contains("modal-show") && (popup.classList.remove("modal-show"), overlay.classList.remove("modal-overlay--show"), popup.classList.remove("modal-feedback--error"))
});
